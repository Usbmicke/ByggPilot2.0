\n\'use client\';\n\nimport useSWR from \'swr\';\nimport { dal } from \'@/lib/dal\'; // DAL can be used on the client, but it will fail because it needs a server session.\nimport { Project } from \'@/lib/types\';\nimport ProjectCard from \'./ProjectCard\';\nimport { logger } from \'@/lib/logger\';\n\n// =================================================================================\n// PROJECT LIST (Client Component) - Blueprint \"Sektion 5.2\"\n// =================================================================================\n// Denna komponent ansvarar för att hämta och visa listan över projekt på klientsidan\n// med SWR. Detta möjliggör automatisk omvalidering (UI-uppdatering) när datan ändras.\n\n// För att SWR ska fungera behöver vi en \"fetcher\"-funktion som anropar vårt API.\n// Vi kan inte använda DAL direkt på klienten eftersom den kräver en server-session.\nconst fetcher = (url: string) => fetch(url).then(res => {\n    if (!res.ok) {\n        throw new Error(\'Kunde inte hämta data.\');\n    }\n    return res.json();\n});\n\n// Vi behöver ett nytt API-endpoint för att hämta projekten från klienten.\n// Detta är en nödvändig del av SWR-arkitekturen.\nexport default function ProjectList() {\n    const { data: projects, error, isLoading } = useSWR<Project[]>(\'/api/projects\', fetcher);\n\n    if (error) {\n        logger.error(\'[ProjectList] SWR fetch error\', { error });\n        return <div className=\"text-center text-red-500 p-8\"><p>Kunde inte ladda projekten.</p></div>;\n    }\n\n    if (isLoading) {\n        return <div className=\"text-center text-text-secondary p-8\"><p>Laddar projekt...</p></div>;\n    }\n\n    return (\n        <>\n            {projects && projects.length > 0 ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\n                    {projects.map(project => (\n                        <ProjectCard \n                            key={project.id} \n                            project={project} \n                        />\n                    ))}\n                </div>\n            ) : (\n                <div className=\"h-full flex items-center justify-center bg-background-secondary rounded-xl border border-border-color p-8\">\n                    <p className=\"text-text-secondary\">\n                        Inga aktiva projekt hittades. Skapa ett nytt via chatten för att komma igång!\n                    </p>\n                </div>\n            )}\n        </>\n    );\n}\n