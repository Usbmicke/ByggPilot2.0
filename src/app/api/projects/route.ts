\nimport { NextResponse } from \'next/server\';\nimport { dal } from \'@/lib/dal\';\nimport { logger } from \'@/lib/logger\';\n\n// =================================================================================\n// PROJECTS API-ROUTE V1.0 - Blueprint \"Sektion 5.2\"\n// =================================================================================\n// Denna API-rutt är skapad specifikt för att SWR-klientkomponenten (ProjectList)\n// ska kunna hämta projektdata på ett säkert sätt.\n\nexport async function GET() {\n  try {\n    // Vi återanvänder vår säkra DAL-funktion. Den validerar automatiskt sessionen.\n    const projects = await dal.projects.getActive();\n    return NextResponse.json(projects);\n  } catch (error: any) {\n    // Om DAL kastar ett fel (t.ex. pga ogiltig session), logga det och returnera ett fel.\n    logger.error(\'[API:/api/projects] Failed to fetch projects\', { error: error.message });\n    return new NextResponse(JSON.stringify({ message: \"Authentication failed or internal error.\" }), { status: 401 });\n  }\n}\n